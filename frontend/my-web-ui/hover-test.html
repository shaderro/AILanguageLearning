<!DOCTYPE html>
<html>
<head>
    <title>Token Hover Test</title>
    <style>
        body { font-family: Arial; padding: 20px; }
        .sentence { margin: 15px 0; padding: 10px; border: 1px solid #ddd; }
        .token { 
            display: inline-block; 
            padding: 5px 8px; 
            margin: 2px; 
            border: 1px solid #ccc; 
            cursor: pointer; 
            border-radius: 3px; 
            transition: all 0.2s;
        }
        .token:hover { background-color: yellow; }
        .token.selected { background-color: orange; }
        .token.disabled { 
            cursor: default; 
            opacity: 0.5;
        }
        .token.disabled:hover { background-color: transparent; }
        .info { 
            background: #f0f0f0; 
            padding: 10px; 
            margin: 10px 0; 
            border-radius: 5px; 
        }
    </style>
</head>
<body>
    <h1>Token Hover Test</h1>
    <div class="info">
        <strong>Instructions:</strong> Click any token to select it. Once selected, tokens in other sentences will be disabled and won't respond to hover.
    </div>
    
    <div class="sentence">
        <span class="token" onclick="selectToken(this)">This</span>
        <span class="token" onclick="selectToken(this)">is</span>
        <span class="token" onclick="selectToken(this)">sentence</span>
        <span class="token" onclick="selectToken(this)">one</span>
        <span class="token" onclick="selectToken(this)">with</span>
        <span class="token" onclick="selectToken(this)">multiple</span>
        <span class="token" onclick="selectToken(this)">tokens</span>.
    </div>
    
    <div class="sentence">
        <span class="token" onclick="selectToken(this)">This</span>
        <span class="token" onclick="selectToken(this)">is</span>
        <span class="token" onclick="selectToken(this)">sentence</span>
        <span class="token" onclick="selectToken(this)">two</span>
        <span class="token" onclick="selectToken(this)">for</span>
        <span class="token" onclick="selectToken(this)">testing</span>.
    </div>
    
    <div class="sentence">
        <span class="token" onclick="selectToken(this)">This</span>
        <span class="token" onclick="selectToken(this)">is</span>
        <span class="token" onclick="selectToken(this)">sentence</span>
        <span class="token" onclick="selectToken(this)">three</span>
        <span class="token" onclick="selectToken(this)">with</span>
        <span class="token" onclick="selectToken(this)">more</span>
        <span class="token" onclick="selectToken(this)">words</span>.
    </div>

    <script>
        let activeSentence = null;
        
        function selectToken(token) {
            const sentence = token.parentElement;
            
            // If there's already an active sentence and it's not this one, ignore
            if (activeSentence && activeSentence !== sentence) {
                console.log('Cannot select token from different sentence');
                return;
            }
            
            // Toggle selection
            token.classList.toggle('selected');
            
            if (token.classList.contains('selected')) {
                // Set this sentence as active
                activeSentence = sentence;
                disableOtherSentences();
                console.log('Selected token, disabled other sentences');
            } else {
                // Check if this sentence still has selected tokens
                const hasSelected = sentence.querySelector('.token.selected');
                if (!hasSelected) {
                    // No more selected tokens in this sentence, enable all
                    activeSentence = null;
                    enableAllSentences();
                    console.log('No more selected tokens, enabled all sentences');
                }
            }
        }
        
        function disableOtherSentences() {
            document.querySelectorAll('.sentence').forEach(s => {
                if (s !== activeSentence) {
                    s.querySelectorAll('.token').forEach(t => t.classList.add('disabled'));
                }
            });
        }
        
        function enableAllSentences() {
            document.querySelectorAll('.token').forEach(t => t.classList.remove('disabled'));
        }
    </script>
</body>
</html>
