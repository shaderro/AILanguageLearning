# âœ… TokenNotation ç»„ä»¶å®ç°å®Œæˆ

## ğŸ‰ å·²å®Œæˆçš„å·¥ä½œ

æˆ‘å·²ç»ä¸ºä½ åˆ›å»ºå¹¶é›†æˆäº†**TokenNotation**ç»„ä»¶ï¼

---

## ğŸ“¦ åˆ›å»ºçš„æ–‡ä»¶

### 1. TokenNotation.jsxï¼ˆæ–°å»ºï¼‰

**ä½ç½®**: `frontend/my-web-ui/src/modules/article/components/TokenNotation.jsx`

**åŠŸèƒ½**:
- æµ…ç°è‰²èƒŒæ™¯ (`bg-gray-100`)
- æ·±ç°è‰²æ–‡å­— (`text-gray-700`)
- æ˜¾ç¤ºæ–‡å­—: "This is a test note"
- å®šä½åœ¨tokenä¸‹æ–¹
- å¸¦å°ç®­å¤´æŒ‡å‘token
- æ·¡å…¥æ·¡å‡ºåŠ¨ç”»

---

## ğŸ”§ ä¿®æ”¹çš„æ–‡ä»¶

### 2. TokenSpan.jsxï¼ˆä¿®æ”¹ï¼‰

**æ·»åŠ çš„åŠŸèƒ½**:

âœ… **å¯¼å…¥ç»„ä»¶** (ç¬¬5è¡Œ)
```jsx
import TokenNotation from './TokenNotation'
```

âœ… **æ·»åŠ çŠ¶æ€ç®¡ç†** (ç¬¬55-56è¡Œ)
```jsx
const [showNotation, setShowNotation] = useState(false)
```

âœ… **Hoveræ—¶æ˜¾ç¤º** (ç¬¬75-77è¡Œ)
```jsx
if (isAsked) {
  setShowNotation(true)
}
```

âœ… **ç¦»å¼€æ—¶éšè—** (ç¬¬85-87è¡Œ)
```jsx
if (isAsked) {
  setShowNotation(false)
}
```

âœ… **æ¸²æŸ“ç»„ä»¶** (ç¬¬120-125è¡Œ)
```jsx
{isAsked && showNotation && (
  <TokenNotation 
    isVisible={showNotation}
    note="This is a test note"
  />
)}
```

---

## ğŸ¯ è§¦å‘é€»è¾‘

```javascript
// TokenSpan.jsx

// æ£€æŸ¥æ˜¯å¦ä¸ºå·²æé—®çš„token
const isAsked = isTextToken && tokenSentenceTokenId != null
  ? isTokenAsked(articleId, tokenSentenceId, tokenSentenceTokenId)
  : false

// Hoverå·²æé—®çš„tokenæ—¶
onMouseEnter={() => {
  if (isAsked) {
    setShowNotation(true)  // â† æ˜¾ç¤ºnotationå¡ç‰‡
  }
}}

// é¼ æ ‡ç¦»å¼€æ—¶
onMouseLeave={() => {
  if (isAsked) {
    setShowNotation(false)  // â† éšè—notationå¡ç‰‡
  }
}}

// æ¡ä»¶æ¸²æŸ“
{isAsked && showNotation && (
  <TokenNotation isVisible={showNotation} note="This is a test note" />
)}
```

**é€»è¾‘**: åªæœ‰**å·²æé—®çš„token** (isAsked=true) æ‰ä¼šåœ¨hoveræ—¶æ˜¾ç¤ºå¡ç‰‡

---

## ğŸ¨ æ ·å¼è¯¦æƒ…

### å¡ç‰‡æ ·å¼

```jsx
<div className="bg-gray-100 border border-gray-300 rounded-lg shadow-lg p-3">
  <div className="text-sm text-gray-700 leading-relaxed">
    This is a test note
  </div>
</div>
```

**é¢œè‰²**:
- èƒŒæ™¯: `bg-gray-100` (æµ…ç°è‰² #F3F4F6)
- è¾¹æ¡†: `border-gray-300` (ä¸­ç°è‰² #D1D5DB)
- æ–‡å­—: `text-gray-700` (æ·±ç°è‰² #374151)

### å®šä½

```jsx
className="absolute top-full left-0 mt-1 z-50"
```

- `absolute`: ç»å¯¹å®šä½
- `top-full`: ä½äºçˆ¶å…ƒç´ åº•éƒ¨
- `left-0`: å·¦å¯¹é½
- `mt-1`: ä¸Šè¾¹è·4px
- `z-50`: åœ¨æœ€ä¸Šå±‚

### åŠ¨ç”»

```jsx
transition-opacity duration-200
opacity: show ? 1 : 0
```

- 150mså»¶è¿Ÿåå¼€å§‹æ˜¾ç¤ºï¼ˆé¿å…é—ªçƒï¼‰
- 200msæ·¡å…¥åŠ¨ç”»
- è‡ªåŠ¨æ·¡å‡º

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### å‰ææ¡ä»¶

**é‡è¦**: å…ˆç¡®ä¿Asked Tokençš„ç»¿è‰²ä¸‹åˆ’çº¿èƒ½æ­£å¸¸æ˜¾ç¤ºï¼

1. é€‰ä¸­ä¸€ä¸ªtoken
2. å‘é€é—®é¢˜
3. ç¡®è®¤tokenæ˜¾ç¤ºç»¿è‰²ä¸‹åˆ’çº¿ âœ…

### æµ‹è¯•TokenNotation

1. **åˆ·æ–°é¡µé¢** (F5æˆ–Ctrl+R)

2. **æ‰¾åˆ°ç»¿è‰²ä¸‹åˆ’çº¿çš„token**ï¼ˆä¹‹å‰æé—®è¿‡çš„ï¼‰

3. **é¼ æ ‡ç§»åˆ°è¯¥tokenä¸Š**

4. **åº”è¯¥çœ‹åˆ°**:
   - 150mså»¶è¿Ÿå
   - Tokenä¸‹æ–¹å‡ºç°æµ…ç°è‰²å¡ç‰‡
   - å¡ç‰‡æ˜¾ç¤º "This is a test note"
   - å¡ç‰‡æœ‰å°ç®­å¤´æŒ‡å‘token

5. **é¼ æ ‡ç§»å¼€**

6. **åº”è¯¥çœ‹åˆ°**:
   - å¡ç‰‡æ·¡å‡ºæ¶ˆå¤±

---

## ğŸ“Š é¢„æœŸæ•ˆæœ

### è§†è§‰å±•ç¤º

```
æ­£å¸¸çŠ¶æ€ï¼ˆæœªhoverï¼‰:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
sentence: Der Hund ist dafÃ¼r verantwortlich.
          â”€â”€â”€ â”€â”€â”€â”€ â”€â”€â”€ â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                         â†‘
                   ç»¿è‰²ä¸‹åˆ’çº¿
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

HoverçŠ¶æ€ï¼ˆé¼ æ ‡åœ¨"dafÃ¼r"ä¸Šï¼‰:
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
sentence: Der Hund ist dafÃ¼r verantwortlich.
          â”€â”€â”€ â”€â”€â”€â”€ â”€â”€â”€ â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
                         â†‘
                   ç»¿è‰²ä¸‹åˆ’çº¿
                         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  This is a test note   â”‚ â† æµ…ç°å¡ç‰‡
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

---

## ğŸ¯ å…³é”®ç‰¹æ€§

âœ… **åªå¯¹å·²æé—®çš„tokenæ˜¾ç¤º**  
âœ… **æµ…ç°è‰²èƒŒæ™¯ + æ·±ç°è‰²æ–‡å­—**  
âœ… **å®šä½åœ¨tokenæ­£ä¸‹æ–¹**  
âœ… **å¸¦å°ç®­å¤´æŒ‡ç¤ºå™¨**  
âœ… **æ·¡å…¥æ·¡å‡ºåŠ¨ç”»**  
âœ… **é˜²é—ªçƒï¼ˆ150mså»¶è¿Ÿï¼‰**  
âœ… **ä¸å½±å“å…¶ä»–åŠŸèƒ½**  

---

## ğŸ”§ è‡ªå®šä¹‰æ‰©å±•

### æ”¹å˜å»¶è¿Ÿæ—¶é—´

```jsx
// TokenNotation.jsx ç¬¬16è¡Œ
const timer = setTimeout(() => setShow(true), 150)  // æ”¹ä¸º 200, 300 ç­‰
```

### æ”¹å˜å¡ç‰‡å†…å®¹

```jsx
// TokenSpan.jsx ç¬¬123è¡Œ
<TokenNotation 
  note="This is a test note"  // â† æ”¹ä¸ºå…¶ä»–å†…å®¹
/>

// æˆ–åŠ¨æ€å†…å®¹
<TokenNotation 
  note={`Token: ${token.token_body} - å·²æé—®`}
/>
```

### æ”¹å˜æ ·å¼

```jsx
// TokenNotation.jsx
bg-gray-100  â†’ bg-blue-50   // æµ…è“è‰²èƒŒæ™¯
text-gray-700 â†’ text-blue-800  // æ·±è“è‰²æ–‡å­—
shadow-lg â†’ shadow-xl  // æ›´å¤§çš„é˜´å½±
```

---

## ğŸ“š ç›¸å…³ç»„ä»¶

| ç»„ä»¶ | è§¦å‘æ¡ä»¶ | æ˜¾ç¤ºä½ç½® |
|------|---------|---------|
| VocabTooltip | hoveræ™®é€štoken | tokenä¸‹æ–¹ |
| VocabExplanationButton | é€‰ä¸­1ä¸ªtoken | tokenä¸‹æ–¹ |
| **TokenNotation** | **hoverå·²æé—®token** | **tokenä¸‹æ–¹** |

---

## ğŸ‰ å®ŒæˆçŠ¶æ€

- âœ… TokenNotationç»„ä»¶åˆ›å»ºå®Œæˆ
- âœ… é›†æˆåˆ°TokenSpanå®Œæˆ
- âœ… æ ·å¼ç¬¦åˆè¦æ±‚ï¼ˆæµ…ç°åº•ã€æ·±ç°æ–‡å­—ï¼‰
- âœ… è§¦å‘é€»è¾‘æ­£ç¡®ï¼ˆhoverå·²æé—®tokenï¼‰
- âœ… å®šä½æ­£ç¡®ï¼ˆtokenä¸‹æ–¹ï¼‰
- âœ… åŠ¨ç”»æ•ˆæœæ·»åŠ å®Œæˆ

---

## ğŸš€ ä¸‹ä¸€æ­¥

**ç«‹å³æµ‹è¯•**:

1. åˆ·æ–°é¡µé¢
2. Hoverç»¿è‰²ä¸‹åˆ’çº¿çš„token
3. æŸ¥çœ‹æ˜¯å¦æ˜¾ç¤ºå¡ç‰‡

**å¦‚æœéœ€è¦ä¿®æ”¹**:
- å‘Šè¯‰æˆ‘è¦æ”¹ä»€ä¹ˆæ ·å¼
- å‘Šè¯‰æˆ‘è¦æ˜¾ç¤ºä»€ä¹ˆå†…å®¹
- æˆ‘å¯ä»¥ç«‹å³ä¿®æ”¹ï¼

---

**å®ç°å®Œæˆï¼è¯·æµ‹è¯•å¹¶å‘Šè¯‰æˆ‘æ•ˆæœï¼** âœ¨


