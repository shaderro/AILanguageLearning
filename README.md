# AIè¯­è¨€å­¦ä¹ åº”ç”¨

**æ›´æ–°æ—¥æœŸï¼š2025å¹´1æœˆ**

è¿™æ˜¯ä¸€ä¸ªåŸºäºAIçš„è¯­è¨€å­¦ä¹ åº”ç”¨ï¼Œä¸“æ³¨äºè¯­æ³•è§„åˆ™å’Œè¯æ±‡è¡¨è¾¾çš„å­¦ä¹ ä¸ç®¡ç†ã€‚é¡¹ç›®é‡‡ç”¨å‰åç«¯åˆ†ç¦»æ¶æ„ï¼Œæ”¯æŒå¤šç§å‰ç«¯æŠ€æœ¯æ ˆã€‚

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

### Backend åç«¯ (`backend/`)
åŒ…å«æ‰€æœ‰åç«¯åŠŸèƒ½æ¨¡å—ï¼Œæä¾›AIåŠ©æ‰‹ã€æ•°æ®ç®¡ç†å’Œé¢„å¤„ç†æœåŠ¡ã€‚

### Legacy UI æ—§ç‰ˆç•Œé¢ (`legacy-ui/`)
åŸºäºKivyæ¡†æ¶çš„æ—§ç‰ˆç”¨æˆ·ç•Œé¢ï¼ŒåŒ…å«å®Œæ•´çš„è¯­è¨€å­¦ä¹ åŠŸèƒ½ã€‚

### Frontend å‰ç«¯ (`frontend/`)
æ–°çš„å‰ç«¯å¼€å‘ç›®å½•ï¼Œæ”¯æŒWebã€ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯å¼€å‘ã€‚

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### AIåŠ©æ‰‹ç³»ç»Ÿ (`backend/assistants/`)

#### ä¸»åŠ©æ‰‹ (main_assistant.py)
- **æ™ºèƒ½å¯¹è¯å¤„ç†**ï¼šæ¥æ”¶ç”¨æˆ·é—®é¢˜ï¼Œåˆ†æå¥å­å†…å®¹ï¼Œæä¾›è¯­è¨€å­¦ä¹ ç›¸å…³çš„å›ç­”
- **å†…å®¹ç›¸å…³æ€§åˆ¤æ–­**ï¼šè‡ªåŠ¨è¯†åˆ«é—®é¢˜æ˜¯å¦ä¸è¯­è¨€å­¦ä¹ ç›¸å…³
- **è¯­æ³•å’Œè¯æ±‡ç®¡ç†**ï¼šæ™ºèƒ½æ·»åŠ æ–°çš„è¯­æ³•è§„åˆ™å’Œè¯æ±‡è¡¨è¾¾
- **ä¼šè¯çŠ¶æ€ç®¡ç†**ï¼šç»´æŠ¤å¯¹è¯ä¸Šä¸‹æ–‡å’Œç”¨æˆ·å­¦ä¹ è¿›åº¦

#### å­åŠ©æ‰‹æ¨¡å— (sub_assistants/)
- **ç›¸å…³æ€§æ£€æŸ¥åŠ©æ‰‹**ï¼š
  - `check_if_grammar_relevant_assistant.py` - æ£€æŸ¥è¯­æ³•ç›¸å…³æ€§
  - `check_if_vocab_relevant_assistant.py` - æ£€æŸ¥è¯æ±‡ç›¸å…³æ€§
  - `check_if_relevant.py` - é€šç”¨ç›¸å…³æ€§æ£€æŸ¥
- **å†…å®¹æ€»ç»“åŠ©æ‰‹**ï¼š
  - `summarize_grammar_rule.py` - è¯­æ³•è§„åˆ™æ€»ç»“
  - `summarize_vocab.py` - è¯æ±‡è¡¨è¾¾æ€»ç»“
  - `summarize_dialogue_history.py` - å¯¹è¯å†å²æ€»ç»“
- **é—®ç­”åŠ©æ‰‹**ï¼š
  - `answer_question.py` - æ™ºèƒ½é—®ç­”å¤„ç†
  - `grammar_example_explanation.py` - è¯­æ³•ç¤ºä¾‹è§£é‡Š
  - `vocab_explanation.py` - è¯æ±‡è§£é‡Š
- **æ¯”è¾ƒåˆ†æåŠ©æ‰‹**ï¼š
  - `compare_grammar_rule.py` - è¯­æ³•è§„åˆ™æ¯”è¾ƒ

#### ä¼šè¯ç®¡ç† (chat_info/)
- **å¯¹è¯å†å²ç®¡ç†** (`dialogue_history.py`)ï¼šç»´æŠ¤å¤šè½®å¯¹è¯è®°å½•
- **ä¼šè¯çŠ¶æ€ç®¡ç†** (`session_state.py`)ï¼šè·Ÿè¸ªå½“å‰å­¦ä¹ ä¼šè¯çŠ¶æ€

### æ•°æ®ç®¡ç†ç³»ç»Ÿ (`backend/data_managers/`)

#### æ ¸å¿ƒæ•°æ®ç±» (data_classes.py)
- **Sentence**ï¼šå¥å­æ•°æ®ç»“æ„ï¼ŒåŒ…å«æ–‡æœ¬IDã€å¥å­IDã€è¯­æ³•æ ‡æ³¨ç­‰
- **GrammarRule**ï¼šè¯­æ³•è§„åˆ™ç»“æ„
- **VocabExpression**ï¼šè¯æ±‡è¡¨è¾¾ç»“æ„
- **OriginalText**ï¼šåŸå§‹æ–‡æœ¬ç»“æ„

#### æ•°æ®ç®¡ç†å™¨
- **DataController** (`data_controller.py`)ï¼šç»Ÿä¸€çš„æ•°æ®æ“ä½œæ§åˆ¶å™¨
- **GrammarRuleManager** (`grammar_rule_manager.py`)ï¼šè¯­æ³•è§„åˆ™ç®¡ç†
- **VocabManager** (`vocab_manager.py`)ï¼šè¯æ±‡è¡¨è¾¾ç®¡ç†
- **OriginalTextManager** (`original_text_manager.py`)ï¼šåŸå§‹æ–‡æœ¬ç®¡ç†
- **DialogueRecord** (`dialogue_record.py`)ï¼šå¯¹è¯è®°å½•ç®¡ç†

### æ•°æ®é¢„å¤„ç†ç³»ç»Ÿ (`backend/preprocessing/`)
- **æ–‡ç« å¤„ç†å™¨** (`article_processor.py`)
- **å¥å­å¤„ç†å™¨** (`sentence_processor.py`)
- **è¯æ±‡å¤„ç†å™¨** (`token_processor.py`)
- **éš¾åº¦è¯„ä¼°** (`single_token_difficulty_estimation.py`)

## ğŸ“ é¡¹ç›®ç»“æ„

```
langApp514/
â”œâ”€â”€ backend/                      # åç«¯åŠŸèƒ½æ¨¡å—
â”‚   â”œâ”€â”€ assistants/               # AIåŠ©æ‰‹ç³»ç»Ÿ
â”‚   â”œâ”€â”€ data_managers/            # æ•°æ®ç®¡ç†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ preprocessing/            # æ•°æ®é¢„å¤„ç†
â”‚   â”œâ”€â”€ data/                     # æ•°æ®æ–‡ä»¶
â”‚   â”œâ”€â”€ main.py                   # ä¸»ç¨‹åºå…¥å£
â”‚   â””â”€â”€ integrated_language_system.py
â”œâ”€â”€ legacy-ui/                    # æ—§ç‰ˆKivyç•Œé¢
â”‚   â”œâ”€â”€ ui/                       # Kivy UIç»„ä»¶
â”‚   â”œâ”€â”€ LangUI/                   # è¯­è¨€å­¦ä¹ UIç»„ä»¶
â”‚   â””â”€â”€ run_main_ui.py            # UIå¯åŠ¨æ–‡ä»¶
â”œâ”€â”€ frontend/                     # æ–°ç‰ˆå‰ç«¯å¼€å‘
â”‚   â””â”€â”€ README.md                 # å‰ç«¯å¼€å‘æŒ‡å—
â”œâ”€â”€ requirements.txt              # ä¾èµ–åŒ…
â””â”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Python 3.7+
- ç›¸å…³ä¾èµ–åŒ…ï¼ˆè§requirements.txtï¼‰

### è¿è¡Œåç«¯æœåŠ¡
```bash
cd backend
python main.py
```

### è¿è¡Œæ—§ç‰ˆUI
```bash
cd legacy-ui
python run_main_ui.py
```

### åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹
```python
from backend.assistants.main_assistant import MainAssistant
from backend.data_managers import data_controller

# åˆå§‹åŒ–æ•°æ®æ§åˆ¶å™¨
dc = data_controller.DataController(max_turns=100)

# åˆ›å»ºä¸»åŠ©æ‰‹
assistant = MainAssistant(data_controller_instance=dc)

# å¤„ç†ç”¨æˆ·é—®é¢˜
assistant.run(sentence, user_question, quoted_string)
```

## ğŸ”§ é…ç½®è¯´æ˜

- **max_turns**ï¼šæœ€å¤§å¯¹è¯è½®æ•°è®¾ç½®
- **æ•°æ®æ–‡ä»¶è·¯å¾„**ï¼šå¯åœ¨DataControllerä¸­é…ç½®
- **AIæ¨¡å‹å‚æ•°**ï¼šå¯åœ¨å„å­åŠ©æ‰‹ä¸­è°ƒæ•´
- **USE_NEW_STRUCTURE**ï¼šå…¨å±€æ–°ç»“æ„æ¨¡å¼å¼€å…³

## ğŸ“ æ³¨æ„äº‹é¡¹

- ç¡®ä¿æ•°æ®æ–‡ä»¶è·¯å¾„æ­£ç¡®
- å®šæœŸå¤‡ä»½é‡è¦æ•°æ®
- ç›‘æ§AIåŠ©æ‰‹çš„å“åº”è´¨é‡
- æ ¹æ®éœ€è¦è°ƒæ•´ç›¸å…³æ€§åˆ¤æ–­é˜ˆå€¼
- æ–°ç»“æ„æ¨¡å¼éœ€è¦ç›¸åº”çš„ç®¡ç†å™¨æ–‡ä»¶æ”¯æŒ
- åˆ‡æ¢ç»“æ„æ¨¡å¼å‰å»ºè®®å¤‡ä»½æ•°æ®

## ğŸ”„ æ–°ç»“æ„æ¨¡å¼ç‰¹æ€§

### Tokençº§åˆ«åˆ†æ
- æ”¯æŒè¯ã€æ ‡ç‚¹ç¬¦å·ã€ç©ºæ ¼çš„ç»†ç²’åº¦è¯†åˆ«
- è¯æ€§æ ‡æ³¨å’ŒåŸå‹è¯æå–
- è¯­æ³•ç»“æ„æ ‡è®°è¯†åˆ«
- è¯æ±‡å…³è”å’Œéš¾åº¦åˆ†çº§

### æ¸è¿›å¼è¿ç§»
- æ”¯æŒè¿è¡Œæ—¶åŠ¨æ€åˆ‡æ¢
- è‡ªåŠ¨æ•°æ®æ ¼å¼è½¬æ¢
- å¤±è´¥æ—¶è‡ªåŠ¨å›é€€
- ä¿æŒå‘åå…¼å®¹æ€§

## ğŸ¯ å¼€å‘è®¡åˆ’

### å‰ç«¯å¼€å‘
- **Webå‰ç«¯**: React/Vue.js + TypeScript
- **ç§»åŠ¨ç«¯**: React Native æˆ– Flutter
- **æ¡Œé¢ç«¯**: Electron

### åŠŸèƒ½æ¨¡å—
- ç”¨æˆ·è®¤è¯å’Œæˆæƒ
- æ–‡ç« é˜…è¯»ç•Œé¢
- è¯æ±‡å­¦ä¹ ç•Œé¢
- è¯­æ³•å­¦ä¹ ç•Œé¢
- AIå¯¹è¯ç•Œé¢
- å­¦ä¹ è¿›åº¦è·Ÿè¸ª
- æ•°æ®å¯è§†åŒ–

---

*æœ¬é¡¹ç›®ä¸“æ³¨äºAIé©±åŠ¨çš„è¯­è¨€å­¦ä¹ ä½“éªŒï¼Œé€šè¿‡æ™ºèƒ½åˆ†æå’Œæ•°æ®ç®¡ç†ï¼Œä¸ºç”¨æˆ·æä¾›ä¸ªæ€§åŒ–çš„è¯­è¨€å­¦ä¹ æ”¯æŒã€‚æ”¯æŒæ–°æ—§æ•°æ®ç»“æ„æ¨¡å¼çš„å¹³æ»‘è¿‡æ¸¡ï¼Œå¹¶é‡‡ç”¨ç°ä»£åŒ–çš„å‰åç«¯åˆ†ç¦»æ¶æ„ã€‚*