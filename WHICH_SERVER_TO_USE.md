# ğŸ¯ ä½¿ç”¨å“ªä¸ªæœåŠ¡å™¨ï¼Ÿä¸€å›¾çœ‹æ‡‚

## âœ… å·²è§£å†³æ··æ·†é—®é¢˜

æˆ‘å·²ç»å¸®ä½ é‡å‘½åäº†å‰ç«¯çš„server.pyï¼Œç°åœ¨ä¸ä¼šæ··æ·†äº†ï¼

---

## ğŸ“ ç°åœ¨çš„æ–‡ä»¶ç»“æ„

```
AILanguageLearning-main/
â”‚
â”œâ”€â”€ server.py  â† ä¸»åç«¯APIï¼ˆç«¯å£8001ï¼‰
â”‚   â­ ä½¿ç”¨è¿™ä¸ªè¿›è¡ŒçœŸå®å¼€å‘ï¼
â”‚   â­ è¿æ¥æ•°æ®åº“
â”‚   â­ åŒ…å«vocab-verboseè¯¦ç»†æ—¥å¿—
â”‚
â””â”€â”€ frontend/my-web-ui/backend/
    â””â”€â”€ server_frontend_mock.py  â† MockæœåŠ¡å™¨ï¼ˆç«¯å£8000ï¼‰
        ğŸ”´ ä»…ç”¨äºå‰ç«¯ç‹¬ç«‹å¼€å‘
        ğŸ”´ ä¸è¿æ¥æ•°æ®åº“
        ğŸ”´ è¿”å›æ¨¡æ‹Ÿæ•°æ®
```

---

## ğŸ¯ å¿«é€Ÿå†³ç­–

### æˆ‘åº”è¯¥ä½¿ç”¨å“ªä¸ªï¼Ÿ

| æˆ‘æƒ³åšä»€ä¹ˆ... | ä½¿ç”¨å“ªä¸ªæœåŠ¡å™¨ | ç«¯å£ |
|--------------|---------------|------|
| **å¼€å‘å’Œæµ‹è¯•Vocabæ•°æ®åº“åŠŸèƒ½** | `server.py`ï¼ˆæ ¹ç›®å½•ï¼‰ | 8001 âœ… |
| **æŸ¥çœ‹è¯¦ç»†çš„æ•°æ®è½¬æ¢æ—¥å¿—** | `server.py`ï¼ˆæ ¹ç›®å½•ï¼‰ | 8001 âœ… |
| **å‰åç«¯è”è°ƒ** | `server.py`ï¼ˆæ ¹ç›®å½•ï¼‰ | 8001 âœ… |
| **æµ‹è¯•API** | `server.py`ï¼ˆæ ¹ç›®å½•ï¼‰ | 8001 âœ… |
| **å‰ç«¯ç‹¬ç«‹å¼€å‘UI** | `server_frontend_mock.py` | 8000 ğŸ”´ |
| **å¿«é€ŸåŸå‹ï¼ˆä¸éœ€è¦æ•°æ®ï¼‰** | `server_frontend_mock.py` | 8000 ğŸ”´ |

**90%çš„æƒ…å†µä¸‹ï¼Œä½ åº”è¯¥ä½¿ç”¨ `server.py`ï¼ˆæ ¹ç›®å½•ï¼Œ8001ç«¯å£ï¼‰ï¼**

---

## ğŸš€ æ­£ç¡®å¯åŠ¨æ­¥éª¤

### å¯åŠ¨ä¸»åç«¯APIï¼ˆ99%çš„æƒ…å†µï¼‰

```powershell
# ç¬¬1æ­¥ï¼šç¡®è®¤åœ¨æ ¹ç›®å½•
cd C:\Users\Mayn\AILanguageLearning-main
pwd  # ç¡®è®¤è·¯å¾„

# ç¬¬2æ­¥ï¼šå¯åŠ¨æœåŠ¡å™¨
python server.py

# ç¬¬3æ­¥ï¼šç¡®è®¤ç«¯å£
# åº”è¯¥çœ‹åˆ°ï¼šINFO:     Uvicorn running on http://0.0.0.0:8001
#                                                      ^^^^ 8001ç«¯å£
```

**å¦‚æœçœ‹åˆ°8000ï¼Œè¯´æ˜ç›®å½•é”™äº†ï¼é‡æ–°æ‰§è¡Œç¬¬1æ­¥ã€‚**

---

### å¯åŠ¨MockæœåŠ¡å™¨ï¼ˆå‰ç«¯ç‹¬ç«‹å¼€å‘ï¼‰

```powershell
# ä»…åœ¨å‰ç«¯éœ€è¦ç‹¬ç«‹å¼€å‘æ—¶ä½¿ç”¨
cd frontend\my-web-ui\backend
python server_frontend_mock.py
```

---

## ğŸ” å¦‚ä½•åŒºåˆ†å½“å‰è¿è¡Œçš„æ˜¯å“ªä¸ªï¼Ÿ

### æ–¹æ³•1ï¼šçœ‹PowerShellè¾“å‡º

**ä¸»åç«¯API (server.py)ï¼š**
```
============================================================
Starting FastAPI Server...
============================================================
Server Address: http://localhost:8001  â† çœ‹è¿™é‡Œï¼
...
INFO:     Uvicorn running on http://0.0.0.0:8001
```

**MockæœåŠ¡å™¨ (server_frontend_mock.py)ï¼š**
```
Creating FastAPI app...
Starting debug API server on port 8000...  â† çœ‹è¿™é‡Œï¼
...
INFO:     Uvicorn running on http://0.0.0.0:8000
```

---

### æ–¹æ³•2ï¼šæ£€æŸ¥ç«¯å£

```powershell
# è¿è¡Œæ£€æŸ¥è„šæœ¬
.\check_ports.ps1
```

è¾“å‡ºï¼š
```
[Port 8000] Frontend Debug Server
  [FREE] Not in use  æˆ–  [RUNNING] PID: xxxxx

[Port 8001] Backend API Server
  [FREE] Not in use  æˆ–  [RUNNING] PID: xxxxx
```

---

### æ–¹æ³•3ï¼šè®¿é—®APIæ ¹è·¯å¾„

**8001ç«¯å£ï¼ˆä¸»åç«¯ï¼‰ï¼š**
```
http://localhost:8001/
```

è¿”å›ï¼š
```json
{
  "message": "Language Learning API",
  "endpoints": {
    "vocab_v2": "/api/v2/vocab",
    "vocab_verbose": "/api/v2/vocab-verbose (è¯¦ç»†æ—¥å¿—ç‰ˆæœ¬)"
  }
}
```

**8000ç«¯å£ï¼ˆMockï¼‰ï¼š**
```
http://localhost:8000/
```

è¿”å›ä¸åŒçš„å“åº”ã€‚

---

## ğŸ”§ å¦‚ä½•åˆ‡æ¢

### ä»MockæœåŠ¡å™¨åˆ‡æ¢åˆ°çœŸå®API

```powershell
# 1. åœæ­¢MockæœåŠ¡å™¨ï¼ˆCtrl+C æˆ–ï¼‰
Stop-Process -Name python -Force

# 2. åˆ‡æ¢åˆ°æ ¹ç›®å½•
cd C:\Users\Mayn\AILanguageLearning-main

# 3. å¯åŠ¨çœŸå®API
python server.py
```

### ä»çœŸå®APIåˆ‡æ¢åˆ°MockæœåŠ¡å™¨

```powershell
# 1. åœæ­¢çœŸå®API
Stop-Process -Name python -Force

# 2. åˆ‡æ¢åˆ°å‰ç«¯backendç›®å½•
cd frontend\my-web-ui\backend

# 3. å¯åŠ¨MockæœåŠ¡å™¨
python server_frontend_mock.py
```

---

## ğŸ’¡ ç«¯å£å†²çªå¤„ç†

### å¦‚æœ8001å·²è¢«å ç”¨

**ä¸´æ—¶æ”¹ç«¯å£ï¼š**
```powershell
# ä¸ä¿®æ”¹ä»£ç ï¼Œå¯åŠ¨æ—¶æŒ‡å®šç«¯å£
uvicorn server:app --port 8002
```

**æˆ–ä¿®æ”¹é…ç½®ï¼š**
ç¼–è¾‘ `server.py` æœ€åä¸€è¡Œï¼š
```python
uvicorn.run(app, host="0.0.0.0", port=8002)  # æ”¹ä¸º8002
```

---

## ğŸ“Š ç«¯å£å·è§„åˆ’å»ºè®®

### å½“å‰ä½¿ç”¨

| ç«¯å£ | æœåŠ¡ | çŠ¶æ€ |
|------|------|------|
| 5173 | å‰ç«¯UI (Vite) | ä½¿ç”¨ä¸­ |
| 8000 | Mock API | å¯é€‰ |
| **8001** | **ä¸»åç«¯API** | **ä¸»è¦ä½¿ç”¨** âœ… |

### æœªæ¥æ‰©å±•

| ç«¯å£ | å¯ç”¨äº |
|------|--------|
| 8002 | æµ‹è¯•ç¯å¢ƒAPI |
| 8003 | é¢„å‘å¸ƒç¯å¢ƒAPI |
| 9000-9999 | å…¶ä»–å¾®æœåŠ¡ |

---

## ğŸ“ ç«¯å£ä½¿ç”¨çš„æœ€ä½³å®è·µ

### 1. ç»Ÿä¸€è§„èŒƒ

```
5000-5999  â†’ å‰ç«¯æœåŠ¡
8000-8999  â†’ åç«¯API
9000-9999  â†’ å¾®æœåŠ¡/å·¥å…·
3000-3999  â†’ æ•°æ®åº“
```

### 2. æ–‡æ¡£åŒ–

åœ¨é¡¹ç›®ä¸­è®°å½•ç«¯å£ä½¿ç”¨ï¼š
```
# .env æˆ– config.py
FRONTEND_PORT=5173
BACKEND_API_PORT=8001
MOCK_API_PORT=8000
```

### 3. é¿å…å†²çª

- ä½¿ç”¨ä¸å¸¸è§çš„ç«¯å£ï¼ˆ8001è€Œä¸æ˜¯8000ï¼‰
- æ£€æŸ¥ç«¯å£ï¼š`netstat -ano | findstr :ç«¯å£`
- æ–‡æ¡£åŒ–ç«¯å£ä½¿ç”¨

---

## âœ… æ€»ç»“

### ä½ çš„ä¸¤ä¸ªserver.py

| ç‰¹å¾ | æ ¹ç›®å½• server.py | å‰ç«¯ server_frontend_mock.py |
|------|-----------------|----------------------------|
| **è·¯å¾„** | `AILanguageLearning-main/` | `frontend/my-web-ui/backend/` |
| **ç«¯å£** | 8001 | 8000 |
| **ç”¨é€”** | çœŸå®åç«¯API | å‰ç«¯å¼€å‘Mock |
| **æ•°æ®åº“** | SQLiteï¼ˆçœŸå®ï¼‰ | Mockæˆ–JSON |
| **ä½¿ç”¨é¢‘ç‡** | ä¸»è¦ä½¿ç”¨ âœ… | å¶å°”ä½¿ç”¨ ğŸ”´ |
| **è¯¦ç»†æ—¥å¿—** | æœ‰ï¼ˆvocab-verboseï¼‰ | æ—  |

### å¯åŠ¨å‘½ä»¤

**ä¸»åç«¯APIï¼ˆå¸¸ç”¨ï¼‰ï¼š**
```powershell
cd C:\Users\Mayn\AILanguageLearning-main
python server.py  # 8001ç«¯å£
```

**MockæœåŠ¡å™¨ï¼ˆå¯é€‰ï¼‰ï¼š**
```powershell
cd frontend\my-web-ui\backend
python server_frontend_mock.py  # 8000ç«¯å£
```

---

## ğŸ‰ é—®é¢˜è§£å†³

- âœ… ä¸¤ä¸ªserver.pyå·²åŒºåˆ†ï¼ˆé€šè¿‡é‡å‘½åï¼‰
- âœ… æ¸…æ¥šå„è‡ªçš„ç”¨é€”
- âœ… çŸ¥é“ä½•æ—¶ä½¿ç”¨å“ªä¸ª
- âœ… çŸ¥é“å¦‚ä½•åˆ‡æ¢ç«¯å£
- âœ… ç†è§£ç«¯å£çš„æ¦‚å¿µ

**ç°åœ¨ä½ å¯ä»¥æ­£ç¡®å¯åŠ¨æœåŠ¡å™¨å¹¶æŸ¥çœ‹è¯¦ç»†æ—¥å¿—äº†ï¼** ğŸš€

---

## ğŸ“ å¿«é€Ÿå¸®åŠ©

**å¿˜è®°åœ¨å“ªä¸ªç›®å½•ï¼Ÿ**
```powershell
pwd  # æŸ¥çœ‹å½“å‰ç›®å½•
```

**å¿˜è®°å“ªä¸ªç«¯å£ï¼Ÿ**
```powershell
.\check_ports.ps1  # æŸ¥çœ‹ç«¯å£ä½¿ç”¨æƒ…å†µ
```

**å¯åŠ¨é”™äº†ï¼Ÿ**
```powershell
Stop-Process -Name python -Force  # åœæ­¢é‡æ¥
```

